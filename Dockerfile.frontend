<<<<<<< HEAD
# build 階段
FROM debian:bullseye AS build

RUN apt-get update && apt-get install -y \
    git curl unzip xz-utils zip libglu1-mesa

RUN git clone https://github.com/flutter/flutter.git /usr/local/flutter

ENV PATH="/usr/local/flutter/bin:/usr/local/flutter/bin/cache/dart-sdk/bin:${PATH}"

WORKDIR /app
COPY . /app

RUN flutter pub get
RUN flutter build web --release


# 部署階段
FROM caddy:2-alpine

COPY --from=build /app/build/web /usr/share/caddy
EXPOSE 80
CMD ["caddy", "file-server", "--root", "/usr/share/caddy", "--listen", ":80"] 
