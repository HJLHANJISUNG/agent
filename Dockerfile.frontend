# Flutter 前端专用 Dockerfile
FROM debian:bullseye

# 安装系统依赖
RUN apt-get update && apt-get install -y \
    git curl unzip xz-utils zip libglu1-mesa

# 安装 Flutter SDK
RUN git clone https://github.com/flutter/flutter.git /usr/local/flutter

# 设置 PATH
ENV PATH="/usr/local/flutter/bin:/usr/local/flutter/bin/cache/dart-sdk/bin:${PATH}"

# 预先执行 flutter doctor 以初始化
RUN flutter doctor

# 设置工作目录
WORKDIR /app

# 复制前端项目文件
COPY . /app

# 安装 Dart/Flutter 依赖
RUN flutter pub get

# 预设命令（可根据需求调整）
CMD ["flutter", "--version"] 